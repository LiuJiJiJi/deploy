version: '3'
services:
  es_1_5:
    container_name: ${ES_1_5_CONTAINER_NAME}
    image: ${ES_1_5_IMAGE_BASE}:${FRPS_IMAGE_TAG}
    command: ["elasticsearch", "-Xms1g", "-Xmx1g", "--cluster.name=openedx", "--bootstrap.mlockall=true"]
    ports:
      - ${ES_1_5_PORT_1}:9200
      - ${ES_1_5_PORT_2}:9300  
    ulimits:
      memlock:
        soft: -1
        hard: -1
    restart: always
  volumes:
    - ${ES_1_5_DATA_FILE}:/usr/share/elasticsearch/data

    services:
      frps:
        container_name: ${FRPS_CONTAINER_NAME}
        image: ${FRPS_IMAGE_BASE}:${FRPS_IMAGE_TAG}
        restart: always
        ports:
          - ${FRPS_HOST_PORT}:50000
          - ${FRPS_PROXY_PORT}:50001
        volumes:
          - ${FRPS_CONF_FILE}:/etc/frp/frps.ini
        environment:
          - TZ="${TZ}"    